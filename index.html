		  track: 0,
		  color: "#00A",
		  count: 0,
		  dmg: 10,
		  active: false,
		  going: true
		  };
        var player = {  //the bear.
		  name: "Bear",
          color: "#00A",
          x: 30,
          y: 20,
		  dir: 2,
		  maxhp:100,
		  hp:50,
		  mp:20,
		  maxmp:20,
		  type: 0,
		  flippers: true,  
          width: 32,
          height: 32,
		  ani: 0,
		  cash: 0,
		  maxcash: 200,
		  kills: 0,
		  gothurt: 0,
		  key: Array(10),
		  sword: 0,
		  init: function () {  //load sprites
		    this.sword=woodsword;
			this.sprites=new Array(4); //4 directions
			this.sprites[0] = new Array(2);  //2 frames
			this.sprites[1] = new Array(2);
			this.sprites[2] = new Array(2);
			this.sprites[3] = new Array(2);
			this.sprites[0][0]= Sprite("bearback1");
			this.sprites[0][1]= Sprite("bearback2");
			
			this.sprites[1][0]= Sprite("bearr1");
			this.sprites[1][1]= Sprite("bearr2");
			
			this.sprites[2][0]= Sprite("bear1");
			this.sprites[2][1]= Sprite("bear2");
			
			this.sprites[3][0]= Sprite("bearl1");
			this.sprites[3][1]= Sprite("bearl2");
			for(p=0;p<this.key.length;p++){this.key[p]=false;}
		  },
		  
		  MP: function(dmg) { //affect MP
			this.mp+=dmg;
			if(this.mp>this.maxmp) {this.mp=this.maxmp;}
			if(this.mp<0) {this.mp=0;};
		  },
		  
		  checkCollide: function(targ) { //did the player bump into another object
			tempx=this.x*16+16;
			tempy=this.y*16+16;
			if((tempx > targ.x*16) && (tempx <targ.x*16+targ.width) && (tempy > targ.y*16) && (tempy <targ.y*16+targ.height)) {
			   return true;
		    }
			return false;
		  },			 
		  
		    drawmp: function(){  //really draws most of the H.U.D.
			
				canvas.font = "14pt Calibri";
				canvas.textAlign = "center";
				canvas.textBaseline = "middle";
				canvas.fillStyle = "white";
				canvas.fillText("MP:", 76, 48);
					
				canvas.fillStyle = "#5F9EA0";
				canvas.fillRect(100, 45, this.mp, 16);
				
				//todo:MOVE THIS
				if(this.key[0]){
					redkeysprite.draw(canvas,7,20);
				}
				if(this.key[1]){
					bluekeysprite.draw(canvas,25,20);
				}
				if(this.key[2]){
					greenkeysprite.draw(canvas,7,40);
				}
				
				goldsprite.draw(canvas,655,25);
				canvas.font = "14pt Calibri";
				canvas.textAlign = "left";
				canvas.textBaseline = "middle";
				canvas.fillStyle = "white";
				if(player.cash==player.maxcash) {canvas.fillStyle = "blue";}
				canvas.fillText(":" + player.cash, 670, 32);
			},
		  
		  drawHearts: function() {
		  
			canvas.font = "14pt Calibri";
			canvas.textAlign = "center";
			canvas.textBaseline = "middle";
			canvas.fillStyle = "white";
			canvas.fillText("Health:", 70, 25);
			  conts=this.hp/20;
			  for(h=0;h<conts-1;h++)
			  {
				heartsprite.draw(canvas,100+h*16+h*2, 20);
			  }
			  if(this.hp%20==0)
			  {
			     heartsprite.draw(canvas,100+h*16+h*2, 20);
			  }else{
				 halfheartsprite.draw(canvas,100+h*16+h*2, 20);
			  }
		  },
		  
		  hurt: function(dmg) {
		    if(this.gothurt>0) {return;}
			this.hp-=dmg;
			if (this.hp<1) {this.kill()}
			//TODO:knockback?
			//Sound.play("playerhurt");
			this.gothurt=5;
          },
		  
		  heal: function(dmg) {
		    this.hp+=dmg;
			if (this.hp>this.maxhp) {this.hp=this.maxhp;}
			//graphic?
			//Sound.play("explosion");
          },
		  
		  pay: function(dmg) {
		    this.cash+=dmg;
			if (this.cash>this.maxcash) {this.cash=this.maxcash;}
			//graphic?
			//Sound.play("ca-ching");
          },
		  
		  
		  hitsword: function (px,py,pw,ph){//sword collision detection
		        if(!this.sword.active) {return false;} //todo: change this to check rectangle not just end point.
				if(this.dir==0){
				    tempx=(this.x)*16+16;
					tempy=(this.y)*16-this.sword.track*2;
					if((tempx > px*16) && (tempx < px*16+pw)){
						if((tempy >py*16) && (tempy< py*16+ph)){
						  return true;
						}
					}

				}else if(this.dir==1){
				    tempx=(this.x)*16+32+this.sword.track*2;;
					tempy=(this.y)*16+16
					if((tempx > px*16) && (tempx < px*16+pw)){
						if((tempy >py*16) && (tempy< py*16+ph)){
						  return true;
						}
					}
				}else if(this.dir==2){
				    tempx=(this.x)*16+16;
					tempy=(this.y)*16+32+this.sword.track*2;
					if((tempx > px*16) && (tempx < px*16+pw)){
						if((tempy >py*16) && (tempy< py*16+ph)){
						  return true;
						}
					}
				}else if(this.dir==3){
			    tempx=(this.x)*16-this.sword.track*2;;
					tempy=(this.y)*16+16
					if((tempx > px*16) && (tempx < px*16+pw)){
						if((tempy >py*16) && (tempy< py*16+ph)){
						  return true;
						}
					}
				}
				return false;
			},


          drawsword: function(cam){
		  		
				canvas.fillStyle = "#7CFC00";
				if(this.dir==0){
					
					canvas.fillRect((this.x-cam.x)*16+16, (this.y-cam.y)*16, this.sword.width, -this.sword.track*2);
				}else if(this.dir==1){
					canvas.fillRect((this.x-cam.x)*16+32, (this.y-cam.y)*16+16, this.sword.track*2,this.sword.width);
				}else if(this.dir==2){
					canvas.fillRect((this.x-cam.x)*16+16, (this.y-cam.y)*16+32, this.sword.width, this.sword.track*2);
				}else if(this.dir==3){
					canvas.fillRect((this.x-cam.x)*16, (this.y-cam.y)*16+16, -this.sword.track*2,this.sword.width);
				}

			},
			
		  animate: function() { //TODO: make this time based, SLOWER
		  if(this.ani==0){
				this.ani=1;
			}else{
				this.ani=0;
			}
		  },
		  
		  update: function() {
            
            if(this.hp<1) {this.kill();}
			
			if(this.sword.active){
                 if(this.sword.going) {
					this.sword.track+=this.sword.speed;
					}

				 if(!this.sword.going) {
					this.sword.track-=this.sword.speed;
					}
					
					if (this.sword.track>this.sword.len) { 
					    this.sword.going=false;
						this.sword.track=this.sword.len;
					}
					
					if (this.sword.track<1) { 
					    this.sword.going=true
						this.sword.track=0;
						this.sword.active=false;
					}

			  }

          },
		  
		  kill: function() {
            
            //TODO: death animation, game over
			this.kills=0;
			this.x=30;
			this.y=20
			this.hp=100;
			this.gothurt=725;

          },
		  
		  draw: function(cam) { //placeholder function
            canvas.fillStyle = bColors[this.type];
            canvas.fillRect((this.x-cam.x)*16, (this.y-cam.y)*16, this.width, this.height);

          },
		  
		  move: function (px,py) {
				this.x+=px;
				this.y+=py
			},
			
		  
		  getKeys: function(merp,cam) {
		      
		      if(defkey.check()){
				if (!this.sword.active){
					this.sword.active=true;
				}
			  }
		  
			  if(keydown.a) {
				cam.center(this);
			    this.dir=3;
				this.animate();
			    if ((this.x>0) && (this.y<MAP_HEIGHT-1) && (merp.canWalk(this,[this.x-1],[this.y])) && (merp.canWalk(this,[this.x-1],[this.y+1]))) {this.move(-1,0);}
			  }else if(keydown.d) {
			    cam.center(this);
			    this.dir=1;
				this.animate();
				if ((this.y<MAP_HEIGHT-1) && (this.x<MAP_WIDTH-2) &&(merp.canWalk(this,[this.x+2],[this.y])) && (merp.canWalk(this,[this.x+2],[this.y+1]))) {this.move(1,0);}
			  }else if(keydown.w) {
			    cam.center(this);
			    this.dir=0;
				this.animate();
				if ((this.y>0) && (this.x<MAP_WIDTH-1) && (merp.canWalk(this,[this.x],[this.y-1])) && (merp.canWalk(this,[this.x+1],[this.y-1]))) {this.move(0,-1);}
			  }else if(keydown.s) {
			    cam.center(this);
			    this.dir=2;
				this.animate(); 
				if ((this.y<MAP_HEIGHT-2) && (this.x<MAP_WIDTH-1) && (merp.canWalk(this,[this.x],[this.y+2])) && (merp.canWalk(this,[this.x+1],[this.y+2]))) {this.move(0,1);}
			  }
			  this.x = this.x.clamp(0, MAP_WIDTH-1);
			  this.y = this.y.clamp(0, MAP_HEIGHT-1);
		  }   
        
        };
		
		 var edcursor = { //edit cursor
          color: "#00A",
          x: 1,
          y: 1,
		  slow: false,
		  mouse: true,
		  size: 1, //TODO: add for loops to draw, placement to make larger brush size, center it?
		  type: 1,
          width: 16,
          height: 16,
          draw: function(cam) {
            	    if(this.type==0){
					   grasssprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==1){
					   darkgrasssprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==2){
					   lavasprite[tileani].draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==3){
					   watersprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==4){
					   stonesprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==5){
					   obsidiansprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==6){
					   mudsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==7){
					   bricksprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==8){
					   woodsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==9){
					   crystalsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==10){
					   mossysprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16); 
					}else if(this.type==11){
					   stonebricksprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==12){
					   plankssprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==13){
					   cobblesprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16); //todo:  add new types
					}else if(this.type==14){
					   dirtsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==15){
					   claysprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==16){
					   wtfsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==17){
					   pedastalsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==18){
					   reddoorsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==19){
					   bluedoorsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else if(this.type==20){
					   greendoorsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
					}else{
				       canvas.fillStyle = bColors[this.data]; 
					   canvas.fillRect((this.x-cam.x)*this.width, (this.y-cam.y)*this.height, this.width, this.height);
					}
					edsprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
          },
		  
		  getKeys: function() {
		  	  if(nkey.check()) { 
				  this.type++;
				  if (this.type > NUM_TILES) {this.type=0;}
			  }
			  
			  if(slowkey.check()) {
				this.slow=!this.slow;
			  }
			  
			  if(cmousekey.check()) {
				this.mouse=!this.mouse;
			  }
			  
			  
			  
			  if (this.slow) {
			  	if(leftkey.check()) {
					this.x -= 1;
				  }
				
				  if(rightkey.check()) {
					this.x += 1;
				  }
				  
				  if(upkey.check()) {
					this.y -= 1;
				  }
				
				  if(downkey.check()) {
					this.y += 1;
				  }
				  
			  }else{
			
				  if(keydown.a) {
					this.x -= 1;
				  }
				
				  if(keydown.d) {
					this.x += 1;
				  }
				  
				  if(keydown.w) {
					this.y -= 1;
				  }
				
				  if(keydown.s) {
					this.y += 1;
				  }
			  }
			  this.x = this.x.clamp(0, MAP_WIDTH-1);
			  this.y = this.y.clamp(0, MAP_HEIGHT-1);
		  }
        };
        
		function Map(I) { //map object
            I = I || {};
		    var i = 0;
			var j = 0;
		    I.active = true;
            I.color = "#00A";
            I.tiles = new Array(MAP_WIDTH);
			for( i=0; i<MAP_WIDTH; i++ ) { I.tiles[i] = new Array(MAP_HEIGHT); }
		    for (i=0;i<MAP_WIDTH; i++){
		        for (j=0;j<MAP_HEIGHT; j++){
					I.tiles[i][j]= makeNewTile();
					I.tiles[i][j].x=i;
					I.tiles[i][j].y=j;
				}
			}
            I.width = MAP_WIDTH;
            I.height = MAP_HEIGHT;
            I.draw = function(cam) {
				cam.check();
				for (i=cam.x;i<cam.x+cam.width; i++){
					for (j=cam.y;j<cam.y+cam.height; j++){
						I.tiles[i][j].draw(cam);
					}
				}
			};
		    I.saveTiles = function (name) {
			    //var myString = JSON.stringify(I.tiles); //!?!
				var tempstring= "";
				for (i=0;i<MAP_WIDTH; i++){
					for (j=0;j<MAP_HEIGHT; j++){
						tempstring = tempstring +I.tiles[i][j].data;
						tempstring += ","
					}
				}
				localStorage.setItem(name, tempstring);

			};
			
		    I.loadDefaultTiles = function () {
				tempstring="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,1,1,1,1,1,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,1,1,1,1,1,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,5,9,9,9,9,9,9,9,9,9,9,9,9,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,7,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,6,6,6,6,6,6,6,6,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,8,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,8,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,".split(",");
				for (i=0;i<MAP_WIDTH; i++){
					for (j=0;j<MAP_HEIGHT; j++){
						I.tiles[i][j].data = tempstring[j+MAP_HEIGHT*i];
					}
				}
			};

		    I.loadTiles = function (name) {
				hempstring=localStorage.getItem(name);
				tempstring=hempstring.split(",");
				for (i=0;i<MAP_WIDTH; i++){
					for (j=0;j<MAP_HEIGHT; j++){
						I.tiles[i][j].data = tempstring[j+MAP_HEIGHT*i];
					}
				}
			};
		    I.setTile = function (x,y,data) {
		       I.tiles[x][y].data = data;
			};
			
		   I.canWalk = function (ply,x,y) { //overhead + side mode
			  if ((I.tiles[x][y].data ==18)  || (I.tiles[x][y].data ==19) || (I.tiles[x][y].data ==20) )
			  {
				if (ply.key[I.tiles[x][y].data-18]) {
					return true;
					}else {return false;}
					
				 }else if ((I.tiles[x][y].data ==2)  || ((I.tiles[x][y].data ==3 ) && (!ply.flippers)) || (I.tiles[x][y].data ==5) || (I.tiles[x][y].data ==7)|| (I.tiles[x][y].data ==8)) {
					return false;
				 }
			return true;
			
			};
			
			
			  I.canShoot = function (x,y) { //overhead + side mode
			  if ((I.tiles[x][y].data ==18)  || (I.tiles[x][y].data ==19) || (I.tiles[x][y].data ==20) ) {return false;	}
			
		      if ((I.tiles[x][y].data ==5) || (I.tiles[x][y].data ==7)|| (I.tiles[x][y].data ==8)) {
				return false;
			  }else {return true;}
		    };
			
			
			I.canStand = function (x,y) { //sidemode only
		      if ((I.tiles[x][y].data ==7)  || (I.tiles[x][y].data ==7 ) || (I.tiles[x][y].data ==5) || (I.tiles[x][y].data ==7)|| (I.tiles[x][y].data ==8)) {
				return true;
			  }else {return false;}
		    };
			
			
			I.drawRadar= function (cam,x,y,px,py) {
				cam.check();
				canvas.save();
				canvas.globalAlpha = 0.75;
				for (i=0;i<MAP_WIDTH; i++){
					for (j=0;j<MAP_HEIGHT; j++){
						  canvas.fillStyle = bColors[I.tiles[i][j].data];
						  canvas.fillRect(x+i*2, y+j*2, 2, 2);
          
					}
				}
				canvas.fillStyle = "#FFD700";
				canvas.fillRect(x+px*2, y+py*2, 4, 4);
				canvas.restore();
			};
		    return I;
        }
		       
	    maps = [];
		maps.push(Map());
		maps[0].loadDefaultTiles();  //so our map is maps[0]
		
		for(ijk=0;ijk<32;ijk++) //randomly place 32 mushrooms
		{
			tempx=Math.floor(Math.random() *(MAP_WIDTH-2));
			tempy=Math.floor(Math.random() *(MAP_HEIGHT-2));
			if(maps[0].tiles[tempx][tempy].data==0) {
				stuff.push(new thing(0,tempx,tempy));
			}
		}
		stuff.push(new thing(1,50,65));  //place heart container, keys, gold, etc
		stuff.push(new thing(5,49,24));
		stuff.push(new thing(6,55,24));
		stuff.push(new thing(2,49,26));
		stuff.push(new thing(3,52,26));
		stuff.push(new thing(4,55,26));
		stuff.push(new thing(7,79,56));
		stuff.push(new thing(9,100,26));
		
		
        function Bullet(I) {  //player fired projectile
          I.active = true;
        
          if(I.dir==0){
			I.xVelocity = 0;
			I.yVelocity = -I.speed;
		  }else if(I.dir==1){
			I.xVelocity = +I.speed;
			I.yVelocity = 0;
		  }else if(I.dir==2){
			I.xVelocity = 0;
			I.yVelocity = +I.speed;
		  }else if(I.dir==3){
			I.xVelocity = -I.speed;
			I.yVelocity = 0;
		  }
          I.width = 3;
          I.height = 3;
		  I.dir = 1;
          I.color = "#AFEEEE";
        
          I.inBounds = function() {
            return I.x >= 0 && I.x <= MAP_WIDTH &&
              I.y >= 0 && I.y <= MAP_HEIGHT;
          };
        
          I.draw = function(cam) {
            canvas.fillStyle = this.color;
            canvas.fillRect((this.x-cam.x)*16, (this.y-cam.y)*16, this.width, this.height);
          };
          
          I.update = function(merp) {
            I.x += I.xVelocity;
            I.y += I.yVelocity;
        
            I.active = I.active && I.inBounds();
			if((I.x>MAP_WIDTH-1) || (I.y>MAP_HEIGHT-1) || (I.x<0) || (I.y<0)) {
				I.active=false;
			}else if(!merp.canShoot([I.x],[I.y])) {I.active=false;} //todo:play a ding sound, change to merp.canflyover?
			
          };
        
          I.explode = function() {
            this.active = false;
            // TODO: graphic
          };
		  
		  I.checkHit= function(targ) {
			tempx=I.x*16;
			tempy=I.y*16;
		  if((tempx > targ.x*16) && (tempx <targ.x*16+targ.width) && (tempy > targ.y*16) && (tempy <targ.y*16+targ.height)) {
		    I.active=false;
			return true;
			
		  }
		  return false;
		  };
		  
      
          return I;
        }
        
        enemies = [];

        function Enemy(I) {  //todo: add more enemy types.
          I = I || {};
          I.name="Evil Bunny";
		  I.hp=10;
		  I.maxhp=10;
		  I.gothurt=0;
          I.active = true;
          I.age = Math.floor(Math.random() * 128);
          
          I.color = "#A2B";
        
          I.x = Math.floor(Math.random() * MAP_WIDTH);
          I.y = 5;
          I.xVelocity = 0
          I.yVelocity = 1;
        
          I.width = 32;
          I.height = 32;
		  
		  I.hurt= function(dmg) {
		    if(I.gothurt>0) {return;}
			I.hp-=dmg;
			if (I.hp<1) {I.explode();}
			I.gothurt=5;
          },
        
          I.inBounds = function() {
            return I.x >= 0 && I.x <= MAP_WIDTH &&
              I.y >= 0 && I.y <= MAP_HEIGHT;
          };
        
          I.sprite = Sprite("enemy1");
        
          I.draw = function(cam) {
			if (I.gothurt>0) {
				I.gothurt--;
				canvas.save();
				if(I.gothurt%2==0){canvas.globalAlpha = 0.5;}
				this.sprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
				canvas.restore();
			}else
			{
				this.sprite.draw(canvas, (this.x-cam.x)*16, (this.y-cam.y)*16);
			}
			if(Mouse.isOver(I,cam)) {drawmousetext(I,cam);}
          };
        
          I.update = function() {
            I.x += I.xVelocity/4;
            I.y += I.yVelocity/4;
        
            I.xVelocity = 3 * Math.sin(I.age * Math.PI / 64);
        
            I.age++;
        
            I.active = I.active && I.inBounds();
          };
        
          I.explode = function() {
            Sound.play("explosion");
			blip = Math.random() *100;
			if (blip >95) {
				stuff.push(new thing(1,Math.round(I.x),Math.round(I.y)));
			}else if (blip >70) {
				stuff.push(new thing(2,Math.round(I.x),Math.round(I.y)));
			}else if (blip >40) {
				stuff.push(new thing(3,Math.round(I.x),Math.round(I.y)));
			}else {	stuff.push(new thing(4,Math.round(I.x),Math.round(I.y)));}
            this.active = false;
            // todo: graphic
			player.kills++;
          };
        
          return I;
        };
        

        setInterval(function() {
          update();
          draw();
        }, 1000/FPS);

		
		
		document.getElementById("myAudio").addEventListener('ended', function() { //loops music
		this.currentTime = 0;
		this.play();
		}, false);
		
		document.getElementById("myAudio").play(); //starts music
		
		player.init();
		
	//------------MAIN LOOP-----------------------------------------
        function update() {
			
		    anicount++;
			if (anicount>anirate) {
				tileani++;
				anicount=0;
			}
			if (tileani>4) {tileani=0} //tile animations
			
		    if(modekey.check()) {
				if (Mode==0) {
					Mode=1;
					camera.center(edcursor);
				}else if (Mode==1) {
				    Mode=0;
					camera.center(player); 
				}else if (Mode==2) {
				    Mode=0;
				}
					
			 }
			  if(shiftkey.check()) { 
			  if (Mode==0) {  camera.center(player); }
			  if (Mode==1) {  camera.center(edcursor); }
			  }

			//camera controlls
			  if(keydown.left) {
				camera.x -= 1;
				if (camera.x<0) {camera.x=0;}
			  }
			
			  if(keydown.right) {
				camera.x += 1;
				if (camera.x>(MAP_WIDTH-camera.width)) {camera.x=MAP_WIDTH-camera.width;}
			  }
			  
			  if(keydown.up) {
				camera.y -= 1;
				if (camera.y<0) {camera.y=0;}
			  }
			
			  if(keydown.down) {
				camera.y += 1;
			 if (camera.y>(MAP_HEIGHT-camera.height)) {camera.y=MAP_HEIGHT-camera.height;}


		  } if(Mode==1){ //edit mode
		      if (defkey.check()) {maps[0].loadDefaultTiles();}
			  if(keydown.space) {
				maps[0].setTile(edcursor.x,edcursor.y,edcursor.type);
			  }
			  if(savekey.check()) {
				maps[0].saveTiles("edsmap");
			  }
			  			  
			  if(loadkey.check()) {
				maps[0].loadTiles("edsmap");
			  }
			  
			  if(helpkey.check()){
			    alert("W,A,S,D = move cursor, B = toggle speed, Space = Place block, V = Mouse mode toggle, N = switch block, Shift= Center Camera on cursor, M= switch to player mode, O = save map, L= loadmap");
			 }
			
			 if (edcursor.mouse) {
				edcursor.x=Math.round(Mouse.mX/16)+camera.x;
				edcursor.y=Math.round(Mouse.mY/16)+camera.y;
				if(Mouse.mouseIsDown){
				  maps[0].setTile(edcursor.x,edcursor.y,edcursor.type)
				}
				if(Mouse.wasWheeled) {
					Mouse.wasWheeled=false;
					if(Mouse.mDelta>0) {
						edcursor.type++;
						if (edcursor.type > NUM_TILES) {edcursor.type=0;}
					}else{
						edcursor.type--;
						if (edcursor.type <0) {edcursor.type=NUM_TILES;}
				    } 
				}
			}
			  
			  edcursor.getKeys();
			  
		  }else if(Mode==0) { //bear mode

			player.getKeys(maps[0],camera);
			player.update();
		    if(keydown.space) { 
				player.shoot();
			}

			  if(helpkey.check()){
			    alert("Arrow keys = move player, Space = shoot, Q=Sword M= switch to edit mode");
			 }
		  }
        ////process things
			playerBullets.forEach(function(bullet) {  
				bullet.update(maps[0]);
			});
			  
			if (Smedly.active) {
				if (player.hitsword(Smedly.x,Smedly.y,Smedly.width,Smedly.height)){ 
				Smedly.hurt(player.sword.dmg);
				//alert ("hit smedly");
				}
			}
			  
		  stuff.forEach(function(thing) {
            thing.update(player);
          });
		  
		  if(!stuff[0]) {gotall=true;} //todo: change smedly requirements
		  
		  if((gotall) && (player.kills>4) && (Smedly.hp>0))
		  { 
			Smedly.active=true;
			gotall=false;
		  }
		  
		  handleCollisions();
		  
          playerBullets = playerBullets.filter(function(bullet) {
            return bullet.active;
          });
          
          enemies.forEach(function(enemy) {
            enemy.update();
          });
        
          enemies = enemies.filter(function(enemy) {
            return enemy.active;
          });
		  
		  stuff = stuff.filter(function(thing) {
            return thing.active;
          });
        
          
        
          if((Math.random() < 0.1) && (enemies.length<7)) {
            enemies.push(Enemy());
          }
        }
        
        player.shoot = function() {
          if (this.mp<2) {return;}
		  this.mp-=2;
		  //Sound.play("shoot");
        		
		  var bulletPosition= { x:0,y:0};
		  bulletPosition.x=this.x+1;
		  bulletPosition.y=this.y+1;
        
        